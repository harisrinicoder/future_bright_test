<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blog App ‚Äì Future Bright Institute</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #fefefe;
      color: #1f2937;
      padding: 20px;
      line-height: 1.6;
      max-width: 960px;
      margin: auto;
    }
    h1, h2, h3 {
      color: #1e40af;
      margin-top: 40px;
    }
    .highlight {
      background-color: #e0f2fe;
      border-left: 5px solid #3b82f6;
      padding: 15px 20px;
      margin-bottom: 20px;
    }
    pre, code {
      background-color: #f3f4f6;
      padding: 12px;
      border-radius: 5px;
      overflow-x: auto;
      font-family: Consolas, monospace;
      display: block;
    }
    .footer {
      background-color: #37474f;
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 1.3em;
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <header class="header">Future Bright Institute</header>

  <h1>üìù Blog System with User Authentication</h1>

  <div class="highlight">
    Users can read blog posts without logging in.<br/>
    Only signed-in users can create, update, or delete <em>their own</em> blogs.<br/>
    Blog posts are stored in the database using Django models and ModelForms.<br/>
    Optional: Admins can moderate blog posts.
  </div>

  <h3>üì¶ Step 1: Create the Blog App</h3>
  <pre><code>python manage.py startapp blog</code></pre>

  <h3>‚öôÔ∏è Step 2: Add the Blog App to Installed Apps</h3>
  <pre><code># settings.py
INSTALLED_APPS = [
    ...
    'blog',
]</code></pre>

  <h3>üß± Step 3: Define the Blog Model</h3>
  <pre><code># blog/models.py
from django.db import models
from django.contrib.auth.models import User

class Post(models.Model):
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    title = models.CharField(max_length=200)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    is_published = models.BooleanField(default=True)  # For admin moderation

    def __str__(self):
        return self.title</code></pre>

  <h3>üóÇÔ∏è Step 4: Make and Apply Migrations</h3>
  <pre><code>python manage.py makemigrations
python manage.py migrate</code></pre>

  <h3>üìã Step 5: Register Post Model in Admin (optional moderation)</h3>
  <pre><code># blog/admin.py
from django.contrib import admin
from .models import Post

@admin.register(Post)
class PostAdmin(admin.ModelAdmin):
    list_display = ('title', 'author', 'created_at', 'is_published')
    list_filter = ('is_published', 'created_at')
    search_fields = ('title', 'content', 'author__username')
</code></pre>

  <h3>üìù Step 6: Create ModelForm for Post</h3>
  <pre><code># blog/forms.py
from django import forms
from .models import Post

class PostForm(forms.ModelForm):
    class Meta:
        model = Post
        fields = ['title', 'content', 'is_published']  # Admin only can set this, see views</code></pre>

  <h3>üîç Step 7: Create Views for List, Detail, Create, Update, Delete</h3>
  <pre><code># blog/views.py
from django.shortcuts import render, get_object_or_404, redirect
from django.contrib.auth.decorators import login_required
from .models import Post
from .forms import PostForm

def post_list(request):
    posts = Post.objects.filter(is_published=True).order_by('-created_at')
    return render(request, 'blog/post_list.html', {'posts': posts})

def post_detail(request, pk):
    post = get_object_or_404(Post, pk=pk, is_published=True)
    return render(request, 'blog/post_detail.html', {'post': post})

@login_required
def post_create(request):
    if request.method == 'POST':
        form = PostForm(request.POST)
        if form.is_valid():
            post = form.save(commit=False)
            post.author = request.user
            if not request.user.is_staff:  # Only admin can publish directly
                post.is_published = False
            post.save()
            return redirect('post_detail', pk=post.pk)
    else:
        form = PostForm()
    return render(request, 'blog/post_form.html', {'form': form})

@login_required
def post_update(request, pk):
    post = get_object_or_404(Post, pk=pk, author=request.user)
    if request.method == 'POST':
        form = PostForm(request.POST, instance=post)
        if form.is_valid():
            form.save()
            return redirect('post_detail', pk=post.pk)
    else:
        form = PostForm(instance=post)
    return render(request, 'blog/post_form.html', {'form': form})

@login_required
def post_delete(request, pk):
    post = get_object_or_404(Post, pk=pk, author=request.user)
    if request.method == 'POST':
        post.delete()
        return redirect('post_list')
    return render(request, 'blog/post_confirm_delete.html', {'post': post})
</code></pre>

  <h3>üîó Step 8: Define URLs</h3>
  <pre><code># blog/urls.py
from django.urls import path
from . import views

urlpatterns = [
    path('', views.post_list, name='post_list'),
    path('post/<int:pk>/', views.post_detail, name='post_detail'),
    path('post/new/', views.post_create, name='post_create'),
    path('post/<int:pk>/edit/', views.post_update, name='post_update'),
    path('post/<int:pk>/delete/', views.post_delete, name='post_delete'),
]</code></pre>

  <pre><code># project/urls.py
from django.urls import path, include

urlpatterns = [
    ...
    path('blog/', include('blog.urls')),
]</code></pre>

  <h3>üìÅ Step 9: Create Templates</h3>
  <pre><code><!-- templates/blog/post_list.html -->
&lt;h1&gt;Blog Posts&lt;/h1&gt;
&lt;a href="{% url 'post_create' %}"&gt;Create New Post&lt;/a&gt;
&lt;ul&gt;
  {% for post in posts %}
    &lt;li&gt;
      &lt;a href="{% url 'post_detail' post.pk %}"&gt;{{ post.title }}&lt;/a&gt;
      by {{ post.author.username }} on {{ post.created_at|date:"M d, Y" }}
    &lt;/li&gt;
  {% empty %}
    &lt;li&gt;No posts yet.&lt;/li&gt;
  {% endfor %}
&lt;/ul&gt;</code></pre>

  <pre><code><!-- templates/blog/post_detail.html -->
&lt;h1&gt;{{ post.title }}&lt;/h1&gt;
&lt;p&gt;by {{ post.author.username }} on {{ post.created_at|date:"M d, Y" }}&lt;/p&gt;
&lt;div&gt;{{ post.content|linebreaks }}&lt;/div&gt;

{% if user.is_authenticated and user == post.author %}
  &lt;p&gt;
    &lt;a href="{% url 'post_update' post.pk %}"&gt;Edit&lt;/a&gt; |
    &lt;a href="{% url 'post_delete' post.pk %}"&gt;Delete&lt;/a&gt;
  &lt;/p&gt;
{% endif %}</code></pre>

  <pre><code><!-- templates/blog/post_form.html -->
&lt;h1&gt;{% if form.instance.pk %}Edit Post{% else %}New Post{% endif %}&lt;/h1&gt;
&lt;form method="post"&gt;
  {% csrf_token %}
  {{ form.as_p }}
  &lt;button type="submit"&gt;Save&lt;/button&gt;
&lt;/form&gt;</code></pre>

  <pre><code><!-- templates/blog/post_confirm_delete.html -->
&lt;h1&gt;Delete Post?&lt;/h1&gt;
&lt;p&gt;Are you sure you want to delete "{{ post.title }}"?&lt;/p&gt;
&lt;form method="post"&gt;
  {% csrf_token %}
  &lt;button type="submit"&gt;Confirm Delete&lt;/button&gt;
  &lt;a href="{% url 'post_detail' post.pk %}"&gt;Cancel&lt;/a&gt;
&lt;/form&gt;</code></pre>

  <h3>üîê Step 10: Permissions and Authentication</h3>
  <ul>
    <li>Anonymous users can <strong>only read</strong> published posts.</li>
    <li>Logged-in users can create new posts; posts are unpublished by default unless user is staff/admin.</li>
    <li>Users can update/delete <em>only their own</em> posts.</li>
    <li>Admins can manage posts from the Django admin panel.</li>
  </ul>

  <div class="highlight">
    Your blog system supports public reading, user-authored content creation/editing, and optional admin moderation.
  </div>

  <footer class="footer">
    &copy; 2025 Future Bright Institute. All rights reserved.
  </footer>

</body>
</html>
